platform: linux

image_resource:
  type: docker-image
  source:
    repository: selenium/standalone-chrome-debug
    tag: "latest"

inputs:
- name: built-project
- name: go-library-source

#outputs:
#- name: built-library

run:
  path: sh
  user: root
  args:
  - -exc
  - |
    cd go-library-source/src/12FactorGoLibrary/ci/selenium
    java -version
    ip addr show
    apt-get update
    apt-get -y install maven
    # ubuntu
    wget --no-cookies \
    --no-check-certificate \
    --header "Cookie: oraclelicense=accept-securebackup-cookie" \
    "http://download.oracle.com/otn-pub/java/jdk/7u55-b13/jdk-7u55-linux-x64.tar.gz" \
    -O jdk-7-linux-x64.tar.gz
    # then
    tar -xzvf jdk-7-linux-x64.tar.gz
    mvn clean test
