platform: linux

image_resource:
  type: docker-image
  source:
    repository: maven
    tag: "latest"

inputs:
- name: built-project
- name: go-library-source

#outputs:
#- name: built-library

run:
  path: sh
  args:
  - -exc
  - |
    cd go-library-source/src/12FactorGoLibrary/ci/LibraryTest
    java -version
    apt-get install curl
    java -jar selenium-server-standalone-3.4.0.jar
    curl -O http://chromedriver.storage.googleapis.com/2.30/chromedriver_linux64.zip
    unzip chromedriver_linux64.zip
    mvn test
